INSTALLATION
  1) Some applications will request the 32bit libraries, so add it
    # dpkg --add-architecture i386

  2) And, search for the number of the drivers that is compatible with your nvidia board.
    To see the card version:
      $ lspci | grep -i vga
    or
      $ lspci | grep -i nvidia

    Now you may need to add some new repositories, such as jessie-backports or so, to match the versions you need.
    Once that is done.
      # aptitude update

  2) Now install all related packages
    # aptitude install bbswitch-dkms intel-microcode firmware-linux-nonfree bumblebee bumblebee-nvidia primus primus-libs primus-libs:i386 linux-headers-$(uname -r)

  NOTE: Nvidia driver installer will complain about nouveau being loaded and X server not being configured, just ignore it and say "OK".

CONFIGURATION
  1) Open the /etc/bumblebee/bumbleee.conf, as root/sudo, and replace the line
    KernelDriver=nvidia
  for
    KernelDriver=nvidia-current
  NOTE: there was a time when a did this tutorial that I did have the in the final form, so, it may already be right. But do note that, you may have the wrong version number.

  2) Add all user that shall be able to use the bumblebee to the group
    # addgroup <user_name> bumblebee

  3) As root, open /etc/default/grub, and in the line GRUB_CMDLINE_LINUX_DEFAULT, append the 'rcutree.rcu_idle_gp_delay=1'.
  NOTE: for instance, mine was like, before the changed,
    GRUB_CMDLINE_LINUX_DEFAULT="quieti"
  that after change:
    GRUB_CMDLINE_LINUX_DEFAULT="quiet rcutree.rcu_idle_gp_delay=1"
  Then run,
    # update-grub

OPTIONAL NVIDIA-TOOLKIT
  1) You can install cuda toolkit to develop applications that use the nvidia-card
    # aptitude install nvidia-cuda-toolkit

 NOTE: you probably may need to install those from the same repository that you installed the other application.

FINAL
  1) Reboot
  2) Test with
    $ optirun glxgears
  and
    $ primusrun glxgears

-------------------------------------------------------------------------
# KNOW BUGS AND POSSIBLE SOLUTIONS
  Runnig steam games with primusrun
    After installing steam and the game, right-click on the game, go to proprieties,
    Then "SET LAUNCH OPTINS..."
    Now add: primusrun %command%
    NOTE: do not change the '%command%' with the name of the game nor anything, it is like that

  Some Steam games do not work
    There are some games that are know to do not work, such as: Dota 2, Team Fortress 2, Left 4 Dead 2, CS. And there are more report but not tested by me.
    The bug appears to be related to a specific version of some libraries.
    Libs libdrm-intel1 in versions 2.4.58-2. The work around is downgrade both versions (amd64 and i386) of libdrm-intel1 from 2.4.58-2 to 2.4.58-1, or, some people appears to have downgrade to 2.4.56.
    NOTE: the last time (10/2016) I installed this there was no need to make this downgrade.

  
-------------------------------------------------------------------------
# RELATED LINKS
https://www.unixmen.com/how-to-make-nvidia-optimus-technology-work-properly-on-debian/
http://forums.debian.net/viewtopic.php?f=16&t=110314
https://github.com/Bumblebee-Project/Bumblebee/issues/637
-------------------------------------------------------------------------
# SEARCH TAG
#bumblebee #nvidia
